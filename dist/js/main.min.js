"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t,n){Array.from||(Array.from=function(t){return Array.prototype.slice.call(t)}),Array.prototype.find||(Array.prototype.find=function(t){return this.filter(t)[0]}),String.prototype.repeat||(String.prototype.repeat=function(t){for(var n="",r=0;t>r;r++)n+=this;return n});var r=function(t){var n=arguments.length<=1||void 0===arguments[1]?document:arguments[1];if(t){var r=n.querySelectorAll(t);return 1===r.length?r[0]:Array.from(r)}return null},e=function(t,n){return void 0!==t&&("undefined"==typeof t?"undefined":_typeof(t))===n?!0:!1},i=function(t){var n=arguments.length<=1||void 0===arguments[1]?2:arguments[1],r=String(t),e=r.length;return e>=n?r:"0".repeat(n-e)+r},o=function(t){var n=t.duration.some(function(t){return"number"!=typeof t});if(n)throw new Error("Given object has invalid values.");var r={},i=t.name,o=Array.from(t.duration).map(function(t){return parseInt(t,10)}),u=Array.from(t.duration),a=null,s=function d(t,n){if(!e(t,"number"))throw new Error("Incorrect time difference: "+t);n=n&&Array.from(n)||o;var r=n.length,i=n[r-1]+t;if(i>=0&&60>i)return n[r-1]+=t,n;if(e(n[r-2],"number")){var u=t%60;n[r-1]+=0>u?60+u:u;var a=d(Math.floor(t/60),n.slice(0,r-1));return a?a.concat(n[r-1]):a}return null},c=function(t,n){a||(a=setInterval(function(){var r=s(-1);r?(o=r,e(t,"function")&&t()):e(n,"function")?l(n):l()},1e3))},m=function(t){a&&(clearInterval(a),a=null),e(t,"function")&&t()},f=function(t){m(),o=Array.from(u),e(t,"function")&&t()},l=function(t){e(t,"function")?m(t):m()};return r={get name(){return i},get duration(){return o},get initialDuration(){return u},set initialDuration(t){u=t}},r.start=c,r.stop=m,r.reset=f,r.changeDurationBy=s,r},u=function(){var t={timers:[{name:"pomodoro",duration:[25,0]},{name:"short break",duration:[5,0]},{name:"long break",duration:[20,0]}]},n={timers:[],currentTimerId:0},u=r(".app-body"),a=r(".timer",u),s=r(".timers-list",u),c={mainTimer:{name:r(".timer__name",a),time:r(".timer__time",a),sound:r(".timer__sound",a)},buttons:{start:r(".start-button",u),stop:r(".stop-button",u),reset:r(".reset-button",u),plus:r(".plus-button",u),minus:r(".minus-button",u)},timers:[]},m=function(t,r){var i=parseInt(t,10);n.currentTimerId=i,e(r,"function")&&r()},f=function(){var t=arguments.length<=0||void 0===arguments[0]?n.currentTimerId:arguments[0],r=n.timers[t];if(!r)throw new Error("Given timer doesn't exist.");var e=r.name,o=r.duration.map(function(t){return i(t)});c.mainTimer.name.textContent=e,c.mainTimer.time.textContent=o[0]+":"+o[1]},l=function(t,n){var r=t.name,e=Array.from(t.initialDuration).map(function(t){return i(t,2)}),o='\n				<li class="timers-list__item">\n					<button type="button"\n						class="timers-list__select-button button"\n						data-timer-id="'+n+'"\n					>\n						<span class="name">'+r+'</span>\n						<span class="duration">'+e[0]+":"+e[1]+"</span>\n					</button>\n				</li>\n			";s.insertAdjacentHTML("beforeend",o)},d=function(){s.innerHTML="",n.timers.forEach(l),c.timers=r(".timers-list__select-button",s),c.timers.forEach(function(t){t.addEventListener("click",function(t){m(t.target.dataset.timerId,f)})})},p=function(){c.mainTimer.sound.play()},b=function(){t.timers.forEach(function(t){n.timers.push(o(t))}),d(),c.buttons.start.addEventListener("click",function(){n.timers[n.currentTimerId].start(f,p)},!1),c.buttons.stop.addEventListener("click",function(){n.timers[n.currentTimerId].stop(),f()},!1),c.buttons.reset.addEventListener("click",function(){n.timers[n.currentTimerId].reset(),f()},!1),c.buttons.plus.addEventListener("click",function(){var t=n.timers[n.currentTimerId];t.initialDuration=t.changeDurationBy(60,t.initialDuration),t.reset(),f(),d()}),c.buttons.minus.addEventListener("click",function(){var t=n.timers[n.currentTimerId];t.initialDuration=t.changeDurationBy(-60,t.initialDuration),t.reset(),f(),d()}),m(0,f)};return{init:b}}();n.app=u}(document,window),app.init();